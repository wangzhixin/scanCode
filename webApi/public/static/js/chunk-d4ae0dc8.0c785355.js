(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4ae0dc8"],{3785:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{type:"flex",justify:"end"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addProblem}},[t._v("添加问题")])],1),i("el-row",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.checkLoading,expression:"checkLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,stripe:"","empty-text":t.emptyText}},[i("el-table-column",{attrs:{prop:"problem_id",label:"序号"}}),i("el-table-column",{attrs:{prop:"problem","show-overflow-tooltip":"",label:"问题"}}),i("el-table-column",{attrs:{prop:"problem_en","show-overflow-tooltip":"",label:"英文"}}),i("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.img.length>0?i("div",[i("el-image",{staticStyle:{"max-width":"80px","max-height":"80px","margin-left":"10px"},attrs:{src:e.row.img,"preview-src-list":[e.row.img]}})],1):i("div",[t._v("-")])]}}])}),i("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.editProblem(e.row)}}},[t._v("编辑")]),i("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"确定提交删除吗？"},on:{onConfirm:function(i){return t.deleteProblem(e.row.problem_id)}}},[i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),i("el-dialog",{attrs:{title:"问题信息",visible:t.showProblem,width:"600px","before-close":t.cancelForm},on:{"update:visible":function(e){t.showProblem=e}}},[i("el-form",{ref:"form",attrs:{"status-icon":"",model:t.form,rules:t.rules}},[i("el-form-item",{attrs:{label:"问题：","label-width":"120px",prop:"problem"}},[i("el-input",{model:{value:t.form.problem,callback:function(e){t.$set(t.form,"problem",e)},expression:"form.problem"}})],1),i("el-form-item",{attrs:{label:"英文：","label-width":"120px",prop:"problem_en"}},[i("el-input",{model:{value:t.form.problem_en,callback:function(e){t.$set(t.form,"problem_en",e)},expression:"form.problem_en"}})],1),i("el-form-item",{attrs:{label:"图片：","label-width":"120px"}},[i("uploadImg",{attrs:{count:1,success:t.uploadImgSuccess,list:t.form.img?[t.form.img]:[],replace:t.replace}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelForm}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},o=[],r=(i("ac1f"),i("5319"),i("b775"));function n(){return Object(r["a"])({url:"/problemList",method:"post"})}function s(t){return Object(r["a"])({url:"/submitProblem",method:"post",data:t})}function a(t){var e={problem_id:t};return Object(r["a"])({url:"/deleteProblem",method:"post",data:e})}var c=i("6bec"),u={components:{UploadImg:c["a"]},data:function(){return{replace:1,showProblem:!1,emptyText:"",clickTab:!1,checkLoading:!1,list:[],form:{problem:"",problem_en:"",img:""},rules:{problem:[{required:!0,message:"请输入问题",trigger:"blur"}],problem_en:[{required:!0,message:"请输入英文",trigger:"blur"}]}}},created:function(){this.init()},methods:{init:function(){var t=this;this.list=[],this.emptyText="数据加载中……",n().then((function(e){0===e.data.list.length?t.emptyText="暂无数据":t.list=e.data.list,t.clickTab=!0}),(function(e){t.clickTab=!0}))},addProblem:function(){this.showProblem=!0},initForm:function(){this.replace++,this.form={problem:"",problem_en:"",img:""}},cancelForm:function(){this.initForm(),this.showProblem=!1},submit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;var i=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s(t.form).then((function(e){e&&(t.cancelForm(),t.init()),i.close()})).catch((function(t){i.close()}))}))},editProblem:function(t){this.showProblem=!0,this.form={problem_id:t.problem_id,problem:t.problem,problem_en:t.problem_en,img:t.img}},deleteProblem:function(t){var e=this;this.checkLoading=!0,a(t).then((function(t){t&&(e.init(),e.checkLoading=!1)})).catch((function(){e.checkLoading=!1}))},uploadImgSuccess:function(t){this.form.img=t[0]}}},m=u,p=i("2877"),d=Object(p["a"])(m,l,o,!1,null,null,null);e["default"]=d.exports},"6bec":function(t,e,i){"use strict";var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"sortable"}},[i("div",{staticClass:"img_upload_box",style:{width:t.uploadBoxWidth}},[i("el-upload",{ref:"uploadImg",attrs:{action:t.action,"list-type":"picture-card","file-list":t.imgList,"auto-upload":!0,headers:t.headers,limit:t.limit,"on-preview":t.handlePictureCardPreview,"on-success":function(e,i,l){return t.uploadSuccess(e,i,l)},accept:t.accept,"on-remove":function(e,i){return t.removerImg(e,i)},"on-exceed":t.exceed,multiple:t.multiple}},[i("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])},o=[],r=(i("a9e3"),i("d3b7"),i("159b"),i("a434"),i("53ca"),i("ac1f"),i("00b4"),i("5319"),i("4d63"),i("2c3e"),i("25f0"),i("4d90"),i("1276"),i("5f87"));i("4360");function n(t){return"http://47.94.167.53:88/index.php/api/"+t+".html"}function s(){var t={};return t[Object(r["b"])()]=Object(r["a"])(),t}var a={name:"UploadImg",props:{count:{type:Number,default:1},success:{type:Function,default:null},list:{type:Array,default:null},customize:{type:Number,default:null},replace:{type:Number,default:0}},data:function(){return{action:n("uploadFile"),accept:"image/png,image/jpg,image/jpeg",limit:this.count,dialogImageUrl:"",dialogVisible:!1,headers:s(),imgList:[],initDropCard:!1,uploadBoxWidth:"100%",multiple:!1}},watch:{list:{handler:function(){0===this.imgList.length&&this.initImgList()},deep:!0,immediate:!0},replace:{handler:function(t){t>0&&this.initImgList()},deep:!0}},mounted:function(){this.count},methods:{initImgList:function(){var t=this;this.imgList=[],this.uploadBoxWidth=170*this.count-20+"px",this.list.length>0&&this.list.forEach((function(e){t.imgList.splice(t.imgList.length,0,{url:e})}))},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},uploadSuccess:function(t,e,i){if(1===t.code)this.imgList.splice(this.imgList.length,0,{url:t.data.url}),this.syncList();else{var l="服务器错误请稍后重试~";this.$message.error(l)}},removerImg:function(t,e){var i=t.url;i.response&&(i=i.response.data.url);var l=[];this.imgList.forEach((function(t,e){t.url!==i&&l.splice(l.length,0,t)})),this.imgList=l,this.syncList()},syncList:function(){var t=[];this.imgList.forEach((function(e,i){t.splice(t.length,0,e.url)})),null!==this.customize?this.success(t,this.customize):this.success(t)},exceed:function(t,e){this.$message.error("最多上传"+this.count+"张图片")}}},c=a,u=(i("e6e6"),i("2877")),m=Object(u["a"])(c,l,o,!1,null,"01b4cbda",null);e["a"]=m.exports},9019:function(t,e,i){},e6e6:function(t,e,i){"use strict";i("9019")}}]);